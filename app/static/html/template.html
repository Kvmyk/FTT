<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Map</title>
    <link rel="stylesheet" type="text/css" href="/static/css/styles.css">
    <script src="/static/js/main.js"></script> 
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/nearest_toilet_distance')
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        const nearestPinInfo = document.getElementById('nearestPinInfo');
                        const nearestPinText = document.getElementById('nearestPinText');
                        nearestPinText.innerText = `Od twojej lokalizacji do najbliższej toalety jest ${data.distance} - ${data.name}`;
                        nearestPinInfo.classList.add('show');

                        // Ukryj blok po 3 sekundach
                        setTimeout(() => {
                            nearestPinInfo.classList.remove('show');
                            nearestPinInfo.classList.add('hide');
                        }, 3000);
                    }
                })
                .catch(error => console.error('Error:', error));
        });

        // Pokaż blok, gdy użytkownik najedzie kursorem na trasę
        document.addEventListener('mouseover', function(event) {
            if (event.target.tagName === 'path') { // Zakładając, że trasa jest rysowana jako element <path>
                const nearestPinInfo = document.getElementById('nearestPinInfo');
                nearestPinInfo.classList.remove('hide');
                nearestPinInfo.classList.add('show');
            }
        });

        // Ukryj blok, gdy użytkownik opuści trasę
        document.addEventListener('mouseout', function(event) {
            if (event.target.tagName === 'path') { // Zakładając, że trasa jest rysowana jako element <path>
                const nearestPinInfo = document.getElementById('nearestPinInfo');
                nearestPinInfo.classList.remove('show');
                nearestPinInfo.classList.add('hide');
            }
        });
    </script>
</head>
<body>
    <div class="circle-plus">+</div>
    <!-- Modal -->
    <div id="myModal">
        <span id="closeModal" style="cursor:pointer; float:right; font-size:20px;">&times;</span>
        <input type="text" id="userInput" placeholder="Wpisz coś...">
        <textarea id="descriptionInput" placeholder="Dodaj opis..."></textarea>
        <label><input type="checkbox" id="paidInput" name ="payable">Płatna</label>
        <label><input type="checkbox" id="customersOnlyInput" name ="onlyForClients">Tylko dla klientów</label>
        <input type="number" id="ratingInput" placeholder="Ocena (1-10)" min="1" max="10">
        <input type="file" id="photoInput" multiple>
        <button onclick="submitModal()">Gotowe</button>
    </div>
    <!-- Nearest Pin Info -->
    <div id="nearestPinInfo">
        <p id="nearestPinText"></p>
    </div>
</body>
</html>